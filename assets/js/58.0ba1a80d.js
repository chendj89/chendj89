(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{452:function(t,e,o){"use strict";o.r(e);o(175);var l=o(0);o(176);var r={__name:"sum",setup(t){const e=Object(l.getCurrentInstance)(),o=Object(l.ref)(!1),r=Object(l.reactive)({list:[],total:0,style:{header:{textAlign:"center"},cell:{textAlign:"center"}},sort:[]}),a=(t,e)=>{let o={};t.forEach(t=>{let l=t[e];o[l]=o[l]||[],o[l].push(t)});let l=[];Object.values(o).map(t=>{l=l.concat(t)});let r=[],a=0;return l.forEach((t,o)=>{0==o?(r.push(1),a=0):l[o][e]==l[o-1][e]?(r[a]+=1,r.push(0)):(r.push(1),a=o)}),{list:l,sort:r}};return Object(l.onMounted)(()=>{e.proxy.$http.post("/api/mock",{"list|5":[{id:"@natural()",unit:"@natural(1, 8)",name:"@first",date:"@date(yyyy-MM-dd)",province:"@province",city:"@city","star|1-5":"@emoji","age|2-8":100,"num|1-6":100,remark:"@csentence(5, 10)",color:"@hex",avatar:"@emoji"}],"total|10-200":200}).then(t=>{if(0==t.code){r.list=t.data.list,r.total=t.data.total;let{list:e,sort:o}=a(r.list,"unit");r.list=e,r.sort=o}}).finally(()=>{o.value=!1})}),{__sfc:!0,ins:e,loading:o,form:r,groupByName:a,mySum:t=>function(t){if(t){if(t.hasOwnProperty("custom"))return function(e){const{columns:o,data:l}=e;let r=o.length,a=new Array(r).fill(""),n=new Array(r).fill("");return o.forEach((t,e)=>{n[e]=t.property}),t.custom({columnNames:n,columns:o,data:l}).map((e,o)=>{r>=o&&(isNaN(Number(e))?a[o]=e:a[o]=t.format?t.format({num:e,name:n[o],index:o,sum:a}):e)}),a};return function(e){const{columns:o,data:l}=e,r=[];return o.forEach((e,o)=>{if(t.total&&t.total.index==o)return void(r[o]=t.total.name);const a=l.map(t=>Number(t[e.property]));a.every(t=>isNaN(t))?r[o]="":t.arr.includes(o)?(r[o]=a.reduce((o,l,r)=>{const a=Number(l);return isNaN(a)?o:t.hasOwnProperty("rowProperty")&&t.rowProperty.includes(e.property)&&t.spanArr?t.spanArr[r]?o+l:o:o+l},0),t.format?r[o]=t.format({num:r[o],name:e.property,sum:r,index:o})+"":r[o]+=""):r[o]=""}),r}}console.warn("请配置统计参数")}({arr:[1,2,3],rowProperty:["unit","date"],spanArr:r.sort,total:{index:0,name:"统计"}}),mySpan:({row:t,column:e,rowIndex:o,columnIndex:l})=>{if(r.sort.length&&l&&l<=2){const t=r.sort[o];return{rowspan:t,colspan:t>0?1:0}}}}}},a=o(20),n=Object(a.a)(r,(function(){var t=this,e=t._self._c,o=t._self._setupProxy;return e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:o.loading,expression:"loading"}],attrs:{data:o.form.list,total:o.form.total,size:"small","header-cell-style":o.form.style.header,"cell-style":o.form.style.cell,"row-key":"id","span-method":o.mySpan,"show-summary":"","summary-method":o.mySum()}},[e("el-table-column",{attrs:{type:"selection",width:"55px"}}),t._v(" "),e("el-table-column",{attrs:{prop:"unit",label:"单位","show-overflow-tooltip":"",width:"60px"}}),t._v(" "),e("el-table-column",{attrs:{prop:"num",label:"天数","show-overflow-tooltip":""}}),t._v(" "),e("el-table-column",{attrs:{prop:"age",label:"年纪","show-overflow-tooltip":""}}),t._v(" "),e("el-table-column",{attrs:{prop:"name",label:"姓名","show-overflow-tooltip":"",width:"100px"}}),t._v(" "),e("el-table-column",{attrs:{prop:"avatar",label:"头像",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("div",{staticStyle:{"font-size":"24px"}},[t._v("\n        "+t._s(o.row.avatar)+"\n      ")])]}}])}),t._v(" "),e("el-table-column",{attrs:{prop:"date",label:"日期","show-overflow-tooltip":"",width:"120px"}}),t._v(" "),e("el-table-column",{attrs:{prop:"color",label:"颜色","show-overflow-tooltip":""}}),t._v(" "),e("el-table-column",{attrs:{prop:"star",label:"幸运","show-overflow-tooltip":"",width:"100px",fixed:"right"}}),t._v(" "),e("el-table-column",{attrs:{label:"城市","show-overflow-tooltip":"",fixed:"right",width:"200px"}},[e("el-table-column",{attrs:{prop:"province",label:"省份",width:"100px","show-overflow-tooltip":""}}),t._v(" "),e("el-table-column",{attrs:{prop:"city",label:"城市",width:"100px","show-overflow-tooltip":""}})],1),t._v(" "),e("el-table-column",{attrs:{prop:"remark",label:"备注","show-overflow-tooltip":"",fixed:"right"}})],1)}),[],!1,null,"511d1b8a",null);e.default=n.exports}}]);